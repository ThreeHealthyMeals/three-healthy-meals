{{>fragments/header}}
<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script type="text/javascript"
        src="http://maps.google.com/maps/api/js?key=AIzaSyDkRhBVakfB5xc9Zwd-gqwjiklk8Wk1-eM"></script>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0 text-dark">식당 조회하기</h1>
                </div><!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">식당조회 페이지</li>
                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-4">
                <style>
                    #map {width:100%; height:400px; clear:both; border:solid 1px red;}
                    input {
                      width: 100%;
                      padding: 20px;
                    }
                    .search-form {
                      max-width: 100%;
                      margin-left: 50px;
                      margin-right: 50px;
                      margin-bottom: 50px;
                    }
                    input.search {
                      margin: 0;
                      text-align: center;
                      outline: 0;
                      border: 10px solid #f7f7f7;
                      width: 120%;
                      left: -10%;
                      position: relative;
                      top: 10px;
                      z-index: 2;
                      border-radius: 5px;
                      font-size: 40px;
                      box-shadow: 0 0 5px rgba(0, 0, 0, 0.12), inset 0 0 2px rgba(0, 0, 0, 0.19);
                    }
                </style>
                <form class="search-form">
                    <input type="text" class="search" placeholder="ex)은희네 닭떡볶이" />
                </form>

                <div id="map"></div>
                <script type="text/javascript">
                    $(document).ready(function() {
                        var myLatlng = new google.maps.LatLng(35.837143,128.558612); // 위치값 위도 경도
                        var Y_point			= 35.837143;		// Y 좌표
                        var X_point			= 128.558612;		// X 좌표
                        var zoomLevel		= 10;				// 지도의 확대 레벨 : 숫자가 클수록 확대정도가 큼
                        var markerTitle		= "대구광역시";		// 현재 위치 마커에 마우스를 오버을때 나타나는 정보
                        var markerMaxWidth	= 300;				// 마커를 클릭했을때 나타나는 말풍선의 최대 크기

                    // 말풍선 내용
                        var contentString	= '<div>' +
                        '<h2>대구남구</h2>'+
                        '<p>안녕하세요. 구글지도입니다.</p>' +

                        '</div>';
                        var myLatlng = new google.maps.LatLng(Y_point, X_point);
                        var mapOptions = {
                            zoom: zoomLevel,
                            center: {lat: 37.6, lng: 127},
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        }
                        const myLatLng = { lat: 37.363, lng: 125.044 };
                        var map = new google.maps.Map(document.getElementById('map'), mapOptions);
                        var marker = new google.maps.Marker({ position: myLatLng, map: map, title: "테스트" });
                        {{ #restaurants }}
                        var name = '{{name}}';
                        var lat = {{latitude}};
                        var lng = {{longitude}};
                        var pos = { lat: lat, lng: lng };
                        var marker = new google.maps.Marker({ position: pos, map: map, title: name });
                        google.maps.event.addListener(marker, 'click', function() {
                            infowindow.open(map, marker);
                        });
                        {{ /restaurants }}

                        var infowindow = new google.maps.InfoWindow(
                            {
                                content: contentString,
                                maxWizzzdth: markerMaxWidth
                            }
                        );

                    });

                </script>

            </div>
            <div class="col-8">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">안심식당 리스트</h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <table class="table">
                            <th>식당명</th>
                            <th>주소</th>
                            <th>전화번호</th>
                            <th>가격</th>
                            <th>위도</th>
                            <th>경도</th>
                            {{ #restaurants }}
                            <tr class="restaurant-list"
                                onclick="location.href='/restaurants/{{id}}'">
                                <td>{{name}}</td>
                                <td>{{address}}</td>
                                <td>{{address}}</td>
                                <td>{{price}}</td>
                                <td>{{latitude}}</td>
                                <td>{{longitude}}</td>
                            </tr>
                            {{ /restaurants }}
                        </table>
                        <!-- /.col-md-6 -->
                    </div>
                    <!-- /.row -->
                </div><!-- /.container-fluid -->
            </div>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->
    </section>


    {{>fragments/footer}}
